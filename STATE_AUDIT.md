# –†–µ–≤–∏–∑–∏—è —Å—Ç–µ–π—Ç–æ–≤ –≤ App.tsx

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ "–î–≤–æ–π–Ω–∏–∫–æ–≤" (useState)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **–ù–ï–¢ –î–í–û–ô–ù–ò–ö–û–í**

–ù–∞–π–¥–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç–µ–π—Ç—ã:
- `const [data, setData] = useState<AppData>(() => ({}))` - **–ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô** —Å—Ç–µ–π—Ç –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
- `const [currentUser, setCurrentUser] = useState(...)` - —Å—Ç–µ–π—Ç –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `const [currentWeekId, setCurrentWeekId] = useState(...)` - —Å—Ç–µ–π—Ç –¥–ª—è –Ω–µ–¥–µ–ª–∏
- `const [isLoading, setIsLoading] = useState(true)` - —Ñ–ª–∞–≥ –∑–∞–≥—Ä—É–∑–∫–∏
- `const [isSyncing, setIsSyncing] = useState(false)` - —Ñ–ª–∞–≥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- `const [hasLoadedFromServer, setHasLoadedFromServer] = useState(false)` - —Ñ–ª–∞–≥ –∑–∞–≥—Ä—É–∑–∫–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞

**–í—ã–≤–æ–¥:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–¥–Ω–æ–º —Å—Ç–µ–π—Ç–µ `data`. –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–µ–π—Ç–∞–º–∏.

---

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (useEffect)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–û –ù–ê–°–¢–†–û–ï–ù–û**

```typescript
useEffect(() => {
  // ... –ø—Ä–æ–≤–µ—Ä–∫–∏ ...
  saveData(data); // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏...
}, [data, hasLoadedFromServer, isSyncing, isLoading]); // ...—Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
```

**–í—ã–≤–æ–¥:** 
- `useEffect` —Å–ª–µ–¥–∏—Ç –∑–∞ `data` ‚úÖ
- `saveData` –ø–æ–ª—É—á–∞–µ—Ç `data` ‚úÖ
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ ‚úÖ

---

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ø–æ—á–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–¶–µ–ø–æ—á–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
1. `ProjectRow` ‚Üí `handleLeadChange` ‚Üí `onUpdate(project.id, updatedProject)`
2. `TargetologistWorkspace` ‚Üí `handleUpdate` ‚Üí `onUpdateProjects(updatedProjects)`
3. `App.tsx` ‚Üí `updateUserProjects` ‚Üí `handleUpdate` ‚Üí `setData`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **–¶–ï–ü–û–ß–ö–ê –ü–†–ê–í–ò–õ–¨–ù–ê–Ø**

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Å—Ç–µ–π—Ç `data` —á–µ—Ä–µ–∑ `handleUpdate`.

---

### 4. –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –í header, —Ä—è–¥–æ–º —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ `leads` –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π (–ø–µ—Ä–≤—ã–µ 2 –∑–∞–ø–∏—Å–∏)

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
1. –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –≤ –∏–Ω–ø—É—Ç –ª–∏–¥–æ–≤
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–¢–ï–°–¢ –°–¢–ï–ô–¢–ê"
3. –ï—Å–ª–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "0 –∑–∞–ø–∏—Å–µ–π" - –¥–∞–Ω–Ω—ã–µ –Ω–µ –¥–æ—à–ª–∏ –¥–æ —Å—Ç–µ–π—Ç–∞
4. –ï—Å–ª–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ - –¥–∞–Ω–Ω—ã–µ –≤ —Å—Ç–µ–π—Ç–µ –µ—Å—Ç—å

---

## üîç –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í `updateUserProjects`:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ü–ï–†–ï–î –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å—Ç–µ–π—Ç–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ü–û–°–õ–ï –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–µ–π—Ç–∞
- ‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, –µ—Å–ª–∏ leads –ø—É—Å—Ç—ã–µ
- ‚úÖ –û—à–∏–±–∫–∏, –µ—Å–ª–∏ leads –ø–æ—Ç–µ—Ä—è–ª–∏—Å—å –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

### –í `useEffect` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- ‚úÖ –ü–æ–∫–∞–∑ –ø—Ä–∏–º–µ—Ä–æ–≤ leads –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, –µ—Å–ª–∏ leads –ø—É—Å—Ç—ã–µ

---

## üéØ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ–π—á–∞—Å

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –≤–æ–π–¥–∏—Ç–µ –∫–∞–∫ —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ò–≤–∞–Ω")**
2. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–¢–ï–°–¢ –°–¢–ï–ô–¢–ê" –≤ header**
3. **–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –≤ –ª—é–±–æ–π –∏–Ω–ø—É—Ç –ª–∏–¥–æ–≤**
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   - –û–±–Ω–æ–≤–∏–ª—Å—è –ª–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–¢–ï–°–¢ –°–¢–ï–ô–¢–ê"?
   - –ü–æ—è–≤–∏–ª–∏—Å—å –ª–∏ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏?
   - –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ª–æ–≥–∏ `üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å—Ç–µ–π—Ç–∞:`?
   - –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ª–æ–≥–∏ `üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ –ü–û–°–õ–ï –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–µ–π—Ç–∞:`?

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ï—Å–ª–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "0 –∑–∞–ø–∏—Å–µ–π", –Ω–æ –≤—ã –≤–≤–æ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:
- –ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ü–µ–ø–æ—á–∫–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (ProjectRow ‚Üí TargetologistWorkspace ‚Üí App)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ `üìù handleLeadChange –≤—ã–∑–≤–∞–Ω:` - –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏ –æ–Ω?

### –ï—Å–ª–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, –Ω–æ –≤ –±–∞–∑—É —É—Ö–æ–¥–∏—Ç –ø—É—Å—Ç–æ–µ:
- –ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `saveData` –∏–ª–∏ –≤ –º–µ—Ä–∂–∏–Ω–≥–µ Real-time
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ `üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ Supabase...` - —á—Ç–æ —Ç–∞–º –≤ –¥–∞–Ω–Ω—ã—Ö?

### –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç—Å—è –º–µ–∂–¥—É "–ü–û–°–õ–ï –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–µ–π—Ç–∞" –∏ "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö":
- –ü—Ä–æ–±–ª–µ–º–∞ –≤ –º–µ—Ä–∂–∏–Ω–≥–µ Real-time
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ `üîÑ –î–∞–Ω–Ω—ã–µ —Å–º–µ—Ä–∂–µ–Ω—ã` - –Ω–µ –∑–∞—Ç–∏—Ä–∞—é—Ç –ª–∏ –æ–Ω–∏ –¥–∞–Ω–Ω—ã–µ?

---

## ‚úÖ –ò—Ç–æ–≥

**–°—Ç–µ–π—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- ‚úÖ –ù–µ—Ç –¥–≤–æ–π–Ω–∏–∫–æ–≤
- ‚úÖ useEffect —Å–ª–µ–¥–∏—Ç –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
- ‚úÖ –¶–µ–ø–æ—á–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏ –ª–æ–≥–∏, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏, –≥–¥–µ –∏–º–µ–Ω–Ω–æ —Ç–µ—Ä—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ.
